<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Test Jul</title>

    <!--for prod-->
    <!--<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>-->

    <!--for dev-->
    <script src="bower_components/jquery/dist/jquery.js" type="text/javascript"></script>

</head>


<body>
<div>
    <button id="SSQ">get next trains</button><br>
    <div id="SSQResp"></div>
</div>


</body>

<script type="text/javascript">



    $('#SSQ').on('click',function(event){

        $('#SSQResp').empty();
        $.get("http://82.11.201.224:8081/stations?code=SSQ",
            function(data) {
                $("<p/>").html(data.name + " (updated ("+data.curTime + ") seconds ago)").appendTo("#SSQResp");
//                $("<p/>").html(data.curTime).appendTo("#SSQResp");

                data.platforms.forEach(function(p){
                    $("<p/>").html("## "+p.name).appendTo("#SSQResp");

                    if(p.trains.length>0){
                        p.trains.forEach(function(t){
                            var orderNum = ["1st","2nd","3rd"];
                            $("<p/>").html(orderNum[t.index()]+" Circle Line train in " + t.timeTo + " min").appendTo("#SSQResp");
                        });
                    } else {
                        $("<p/>").html("There are no Circle Line trains reported on this platform").appendTo("#SSQResp");
                    }
                })
            }
    )})


</script>

</html>
